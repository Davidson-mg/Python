{% extends 'base.html' %}


{%block conteudo%}

    <h1 class="mt-5">Minha agenda</h1>

    <table class="table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Sobrenome</th>
            <th>Telefone</th>
            <th>Categoria</th>
        </tr>
        </thead>
        <tbody>
        {% for contato in contatos %} <!-- dentro de chaves e % podemos usar comando python. Estamos
         dando um for no obj contatos que vem lá do arquivo templates/views, no metodo index -->
            <tr>
                <td>{{contato.id}}</td>
                <td>
                    <a href="{%url 'ver_contato' contato.id%}"> {{ contato.nome }}</a>
                </td>
                <td>{{ contato.sobrenome }}</td>
                <td>{{ contato.telefone }}</td>
                <td>{{ contato.categoria }}</td>
            </tr>
        {%endfor%}
        </tbody>
    </table>

<nav aria-label="Page navigation example">
  <ul class="pagination">
    {% for pagina in contatos.paginator.page_range %} <!-- Esse for vai percorrer o contatos lá do arquivo views no
    metodo index que recebe paginator. -->
      {% if contatos.number == pagina %}
      <!-- request.GET.termo serve para evitar erro quando efetuamos uma busca no campo de pesquisa ele retorna
       muitos contatos e que precisa de mais de uma pagina e ao digitar na segunda pagina em diante daria erro sem
       este complemento aqui-->
      <li class="page-item active">
          <a class="page-link" href="?p={{ pagina }} & termo = {{ request.GET.termo }}">{{pagina}}</a>
      </li>
      {% else %}
      <li class="page-item ">
          <a class="page-link" href="?p={{ pagina }} & termo = {{ request.GET.termo }}">{{pagina}}</a>
      </li>
      {%endif%}
    {%endfor%}
  </ul>
</nav>

{%endblock%}